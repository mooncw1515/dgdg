<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>시간표 및 수행평가</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    html, body {
      margin: 0; padding: 0; height: 100%;
      background: linear-gradient(135deg, #ececec, #c3c3c3);
      font-family: 'Poppins', sans-serif;
      color: #333;
      box-sizing: border-box;
      display: flex; justify-content: center; align-items: flex-start;
      padding: 40px 20px;
      user-select: none;
    }
    .container {
      background-color: #fff;
      border-radius: 16px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      width: 480px;
      max-width: 95vw;
      padding: 40px 30px;
      box-sizing: border-box;
      display: flex; flex-direction: column; align-items: center;
    }
    h1 {
      font-weight: 600;
      margin-bottom: 32px;
      font-size: 28px;
      color: #222;
      letter-spacing: 0.05em;
      user-select: text;
    }
    h2.section-title {
      font-size: 22px;
      font-weight: 600;
      margin-top: 40px;
      color: #005a9e;
      border-bottom: 2px solid #005a9e;
      padding-bottom: 6px;
      align-self: flex-start;
    }
    table {
      border-collapse: separate;
      border-spacing: 0;
      border-radius: 12px;
      overflow: hidden;
      width: 100%;
      margin-top: 24px;
      font-size: 16px;
      color: #444;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      background-color: #fafafa;
    }
    thead tr {
      background: linear-gradient(90deg, #0078d7, #005a9e);
      color: white;
      font-weight: 700;
      letter-spacing: 0.07em;
      user-select: none;
    }
    thead th, tbody td {
      padding: 12px;
      text-align: center;
    }
    tbody td {
      background-color: #fff;
      font-weight: 500;
      border-bottom: 1px solid #ddd;
      user-select: text;
    }
    tbody tr:hover {
      background-color: #e1f0ff;
      cursor: default;
      transition: background-color 0.3s ease;
    }
    ul.task-list {
      margin-top: 32px;
      padding-left: 24px;
      color: #0078d7;
      font-weight: 600;
      font-size: 16px;
      line-height: 1.5;
      list-style-type: disc;
      user-select: text;
      width: 100%;
    }
    ul {
      margin-top: 8px;
      padding-left: 20px;
      color: #444;
    }
    table.info-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
      font-size: 15px;
    }
    .info-table th, .info-table td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 id="classTitle">시간표 및 수행평가</h1>
    <div id="schedule"></div>
  </div>

  <script>
    const loggedInUser = localStorage.getItem('loggedInUser');
    if (!loggedInUser) {
      alert('로그인이 필요합니다.');
      window.location.href = 'index.html';
    }

    const selectedClass = localStorage.getItem('selectedClass');
    if (!selectedClass) {
      alert('반 정보가 없습니다. 다시 로그인 해주세요.');
      window.location.href = 'index.html';
    }

    document.getElementById('classTitle').textContent = `${selectedClass} 반 시간표`;

    const timetable = {}; // 생략된 부분에 전체 timetable JSON 붙이세요
    const tasks = {
      "1-1": ["국어 수행평가: 6월 10일", "수학 수행평가: 7월 15일"],
      "1-2": ["영어 수행평가: 6월 12일"]
    };

    const container = document.getElementById('schedule');
    const days = ["월요일", "화요일", "수요일", "목요일", "금요일"];
    const maxPeriodsPerDay = {"월요일":7,"화요일":7,"수요일":6,"목요일":6,"금요일":6};
    const maxPeriod = 7;

    if (timetable[selectedClass]) {
      let tableHTML = `<table><thead><tr><th>교시/요일</th>`;
      days.forEach(day => tableHTML += `<th>${day}</th>`);
      tableHTML += `</tr></thead><tbody>`;
      for (let i = 0; i < maxPeriod; i++) {
        tableHTML += `<tr><td>${i + 1}교시</td>`;
        days.forEach(day => {
          const subject = timetable[selectedClass][day]?.[i] || "";
          tableHTML += `<td>${subject}</td>`;
        });
        tableHTML += `</tr>`;
      }
      tableHTML += `</tbody></table>`;
      container.innerHTML += tableHTML;
    } else {
      container.innerHTML += "<p>시간표가 없습니다.</p>";
    }

    if (tasks[selectedClass]) {
      container.innerHTML += "<ul class='task-list'>";
      tasks[selectedClass].forEach(task => container.innerHTML += `<li>${task}</li>`);
      container.innerHTML += "</ul>";
    } else {
      container.innerHTML += "<p>수행평가 일정이 없습니다.</p>";
    }

    // 교무실 자리 배치
    const teacherTable = `
      <h2 class="section-title">교무실 자리 배치표</h2>
      <table class="info-table">
        <tr><th>자리</th><th>담당 교사</th><th>과목</th></tr>
        <tr><td>1번</td><td>홍길동</td><td>국어</td></tr>
        <tr><td>2번</td><td>김철수</td><td>수학</td></tr>
      </table>
    `;
    container.innerHTML += teacherTable;

    // 학교 전체 배치도
    const layoutData = {
      "1층":["시청각실","준비실","문서고","학력향상실","문헌정보실","실험실장","진로활동실","진로진학상담실","보건실","특수반","교장실","행정실","분장실","1교무실","신발장","여교사휴게실","wee클래스"],
      "2층":["1학년 교실 (1-1 ~ 1-10)","교과교실","ai융합실","컴퓨터실","학생활동실","화학생물실","흡연예방교육실"],
      "3층":["3학년 교실 (3-1 ~ 3-10)","5교무실","음악실","학생활동실","학생회의실","미술실","미술준비실","학생활동실4"],
      "기타":["체육관","매점","급식실","주차장","운동장"]
    };
    let layoutHTML = `<h2 class="section-title">학교 전체 배치도</h2>`;
    for (const floor in layoutData) {
      layoutHTML += `<h3>${floor}</h3><ul>`;
      layoutData[floor].forEach(room => layoutHTML += `<li>${room}</li>`);
      layoutHTML += `</ul>`;
    }
    container.innerHTML += layoutHTML;

    // 학사 일정
    const academicData = {
      "6월": ["06.03: 대통령 선거", "06.04: 대수능 모의평가", "06.05: 개교기념일", "06.06: 현충일"],
      "7월": ["07.01~07.04: 지필평가", "07.07~07.09: 수업량유연화주간", "07.10: 전국연합학력평가", "07.15: 학생회 선거"],
      "8월": ["08.13: 개학일", "08.15: 광복절", "08.29~08.30: 리더십캠프"],
      "12월": ["12.11~12.12: 지필평가", "12.25: 성탄절", "12.31: 겨울방학식"]
    };
    let scheduleHTML = `<h2 class="section-title">학사 일정</h2>`;
    for (const month in academicData) {
      scheduleHTML += `<h3>${month}</h3><ul>`;
      academicData[month].forEach(event => scheduleHTML += `<li>${event}</li>`);
      scheduleHTML += `</ul>`;
    }
    container.innerHTML += scheduleHTML;
  </script>
</body>
</html>
